zabbix_export:
  version: '6.0'
  date: '2025-04-26T00:00:00Z'
  groups:
    - uuid: '6ee1cfd3-0dfc-4e49-93b4-9831bfa1f637'
      name: RouterOSv7
  templates:
    - uuid: 'df3a79e8-594d-11ef-b9a5-8b8d9432b5c5'
      template: 'BGP Monitoring MikroTik RouterOSv7'
      name: 'BGP Monitoring MikroTik RouterOSv7'
      groups:
        - name: RouterOSv7
      items:
        - uuid: '19e85110-72a0-4e58-9b9d-6b08f7a51f6b'
          name: 'Fetch BGP Neighbors Data'
          key: 'bgpRosV7.py[{$API_USER},{$API_PASS},{$HOST_IP},{$API_PORT}]'
          type: ZABBIX_ACTIVE
          value_type: TEXT
          delay: '30s'
          description: 'Fetch BGP neighbor raw data from RouterOSv7'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[*]'
          tags:
            - tag: Application
              value: 'BGP Fetch'

      discovery_rules:
        - uuid: '894bcc6d-3257-4f59-a305-032d21f73f68'
          name: 'Discover BGP Neighbors'
          type: DEPENDENT
          key: 'bgp.discovery'
          delay: '0'
          item_prototypes:
            - uuid: '3c98cc05-7d30-43c2-b0dc-9b8d60b445e5'
              name: 'BGP {#NAME} ({#IP}) Status'
              key: 'bgp.status[{#IP}]'
              type: DEPENDENT
              value_type: UNSIGNED
              units: ''
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$[?(@.IP=="{#IP}")].STATUS.first()'
            - uuid: '2a3cd879-f4f9-4d3e-935d-5ba7a289cf0a'
              name: 'BGP {#NAME} ({#IP}) Uptime'
              key: 'bgp.uptime[{#IP}]'
              type: DEPENDENT
              value_type: UNSIGNED
              units: 's'
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$[?(@.IP=="{#IP}")].UPTIME.first()'
            - uuid: '7c5e4e3d-5dc9-4bba-8e65-7d3c99e255e3'
              name: 'BGP {#NAME} ({#IP}) Message Count'
              key: 'bgp.messages[{#IP}]'
              type: DEPENDENT
              value_type: UNSIGNED
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$[?(@.IP=="{#IP}")].MESSAGES.first()'
            - uuid: 'aa7e6de4-7f19-4f53-87d8-0dcfe435ec7a'
              name: 'BGP {#NAME} ({#IP}) AS Number'
              key: 'bgp.as[{#IP}]'
              type: DEPENDENT
              value_type: UNSIGNED
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$[?(@.IP=="{#IP}")].AS.first()'
            - uuid: 'b4ab89f1-6405-4d46-a10b-6a9c691d3ca5'
              name: 'BGP {#NAME} ({#IP}) Name'
              key: 'bgp.name[{#IP}]'
              type: DEPENDENT
              value_type: TEXT
              preprocessing:
                - type: JSONPATH
                  parameters:
                    - '$[?(@.IP=="{#IP}")].NAME.first()'
          preprocessing:
            - type: JSONPATH
              parameters:
                - '$[?(@.NAME)]'
          master_item:
            key: 'bgpRosV7.py[{$API_USER},{$API_PASS},{$HOST_IP},{$API_PORT}]'
          lld_macro_paths:
            - lld_macro: '{#IP}'
              path: '$.IP'
            - lld_macro: '{#NAME}'
              path: '$.NAME'
          lld_macro_paths_custom: []

