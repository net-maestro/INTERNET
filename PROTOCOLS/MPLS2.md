# MPLS и его использование со связкой BGP  
*(Пример конфигурации на базе Mikrotik RouterOS 7)*

---

## 1. Основы MPLS

### 1.1. Что такое MPLS
**MPLS (Multi-Protocol Label Switching)** — это технология, позволяющая быстрее и гибче перенаправлять пакеты данных в сетях, используя короткие числовые метки (Labels) вместо длинных IP-адресов. MPLS работает поверх любого сетевого уровня (например, IPv4, IPv6) и упрощает реализацию VPN (L3VPN, L2VPN/VPLS), Traffic Engineering и Quality of Service (QoS).

### 1.2. Метки MPLS (Labels)
| Диапазон меток | Описание             |
|---------------|----------------------|
| 0–15          | Зарезервированные (специальные) метки для протокола |
| 16–100000      | Общий пул доступных меток для MPLS (значение зависит от оборудования/вендора) |

*Примечание:* В Mikrotik RouterOS под капотом используется несколько внутренних резервированных меток, однако в пользовательских настройках мы их обычно не трогаем.

### 1.3. Основные понятия MPLS
| Понятие            | Описание |
|--------------------|----------|
| **LSR** (Label Switch Router)       | Устройство (роутер) с поддержкой MPLS, которое может устанавливать, считывать и/или менять метки MPLS на пакетах |
| **LER** (Label Edge Router)         | Граничный роутер MPLS; обычно является входной/выходной точкой MPLS-домена (именно LER присваивает пакетам метку при входе и снимает при выходе) |
| **LDP** (Label Distribution Protocol) | Протокол распределения меток в MPLS. Автоматически рекламирует метки между соседями и поддерживает синхронизацию |
| **L3VPN / VPLS**                    | VPN-решения поверх MPLS. L3VPN обеспечивает маршрутизацию на уровне IP-сетей, а VPLS (Virtual Private LAN Service) – "прозрачную" L2-сеть |

---

## 2. Настройка MPLS на Mikrotik RouterOS 7

### 2.1. Включение MPLS и настройка LDP
1. **Активируем MPLS на интерфейсах**  
   Обычно MPLS включается на "корневых" (транзитных) интерфейсах, через которые будет проходить метка.
   ```bash
   /mpls interface
   add interface=ether1
   add interface=ether2
   ...



**Включаем LDP и указываем транзитные интерфейсы**
## LDP (Label Distribution Protocol) отвечает за автоматическое формирование меток и их обмен между соседями.

